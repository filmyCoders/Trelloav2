<!--Menu Hirarchy-->
<div class="page-breadcrumb">
  <ul>
      <li>
        <a [routerLink]="['../users']" routerLinkActive="active-link">Users</a>

      </li>
      <li class="breadcrumb-seprator">
          <svg width="20" height="21" viewBox="0 0 20 21" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path fill-rule="evenodd" clip-rule="evenodd" d="M7.32742 5.32757C7.65286 5.00214 8.1805 5.00214 8.50593 5.32757L13.0893 9.91091C13.4147 10.2363 13.4147 10.764 13.0893 11.0894L8.50593 15.6728C8.1805 15.9982 7.65286 15.9982 7.32742 15.6728C7.00198 15.3473 7.00198 14.8197 7.32742 14.4942L11.3215 10.5002L7.32742 6.50609C7.00198 6.18065 7.00198 5.65301 7.32742 5.32757Z" fill="#A6ACC4"></path>
              </svg>
      </li>
      <li>
          <a href="all-users.html" class="active">All Users</a>
      </li>
      <li class="breadcrumb-seprator">
          <svg width="20" height="21" viewBox="0 0 20 21" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path fill-rule="evenodd" clip-rule="evenodd" d="M7.32742 5.32757C7.65286 5.00214 8.1805 5.00214 8.50593 5.32757L13.0893 9.91091C13.4147 10.2363 13.4147 10.764 13.0893 11.0894L8.50593 15.6728C8.1805 15.9982 7.65286 15.9982 7.32742 15.6728C7.00198 15.3473 7.00198 14.8197 7.32742 14.4942L11.3215 10.5002L7.32742 6.50609C7.00198 6.18065 7.00198 5.65301 7.32742 5.32757Z" fill="#A6ACC4"></path>
              </svg>
      </li>
     </ul>
</div>
<div class="container my-4">


  <!-- Record Controls -->
<div class="d-flex justify-content-between align-items-center mb-3">
  <div class="record-controls">
    <label for="time-period" class="me-2">Time Period:<svg height="24" version="1.1" width="24" xmlns="http://www.w3.org/2000/svg" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><g transform="translate(0 -1028.4)"><path d="m5 1032.4c-1.1046 0-2 0.9-2 2v14c0 1.1 0.8954 2 2 2h6 2 6c1.105 0 2-0.9 2-2v-14c0-1.1-0.895-2-2-2h-6-2-6z" fill="#bdc3c7"/><path d="m5 3c-1.1046 0-2 0.8954-2 2v14c0 1.105 0.8954 2 2 2h6 2 6c1.105 0 2-0.895 2-2v-14c0-1.1046-0.895-2-2-2h-6-2-6z" fill="#ecf0f1" transform="translate(0 1028.4)"/><path d="m5 3c-1.1046 0-2 0.8954-2 2v3 1h18v-1-3c0-1.1046-0.895-2-2-2h-6-2-6z" fill="#e74c3c" transform="translate(0 1028.4)"/><path d="m7 5.5a1.5 1.5 0 1 1 -3 0 1.5 1.5 0 1 1 3 0z" fill="#c0392b" transform="translate(.5 1028.4)"/><path d="m6 1c-0.5523 0-1 0.4477-1 1v3c0 0.5523 0.4477 1 1 1s1-0.4477 1-1v-3c0-0.5523-0.4477-1-1-1z" fill="#bdc3c7" transform="translate(0 1028.4)"/><path d="m7 5.5a1.5 1.5 0 1 1 -3 0 1.5 1.5 0 1 1 3 0z" fill="#c0392b" transform="translate(12.5 1028.4)"/><g fill="#bdc3c7"><path d="m18 1029.4c-0.552 0-1 0.4-1 1v3c0 0.5 0.448 1 1 1s1-0.5 1-1v-3c0-0.6-0.448-1-1-1z"/><path d="m5 1039.4v2h2v-2h-2zm3 0v2h2v-2h-2zm3 0v2h2v-2h-2zm3 0v2h2v-2h-2zm3 0v2h2v-2h-2z"/><path d="m5 1042.4v2h2v-2h-2zm3 0v2h2v-2h-2zm3 0v2h2v-2h-2zm3 0v2h2v-2h-2zm3 0v2h2v-2h-2z"/><path d="m5 1045.4v2h2v-2h-2zm3 0v2h2v-2h-2zm3 0v2h2v-2h-2zm3 0v2h2v-2h-2zm3 0v2h2v-2h-2z"/></g></g></svg></label>
    <select class="form-select d-inline-block w-auto me-2" id="time-period" (change)="dateFilters($event)">
      <option value="today"selected>Today </option>
      <option value="previousWeek">One Week</option>
      <option value="previousMonth">Last 30 Days</option>
      <option value="allTime" >All Time</option>
    </select>
  </div>
</div>


<div class="d-flex align-items-center mb-3">
  <span class="me-2 font-weight-bold">Filter:</span>
  <span
      *ngFor="let tag of tags"
      class="custom-tag me-2"
      [ngClass]="{ 'active-tag': tag.active }" 
      (click)="toggleTag(tag)"
      >{{ tag.name }}
  </span>
</div>


  <!-- Records Per Page Controls -->
  <div class="d-flex justify-content-between align-items-center mb-3">
    <div class="record-controls">
      <label for="records-per-page" class="me-2">Show</label>
      <select id="records-per-page" class="form-select d-inline-block w-auto me-2" (change)="onRecordsPerPageChange($event)">
        <option value="5">5</option>
        <option value="10">10</option>
        <option value="25">25</option>
        <option value="50">50</option>
        <option value="100">100</option>
      </select>
      <span>records per page</span>
    </div>

    <!-- Search Field -->
    <div class="search-bar">
      <input 
      class="form-control"
      type="text" 
      placeholder="Search..." 
      id="searchInput" 
      (keyup)="onSearch($event)">    
    </div>
  </div>

  <!-- Table -->
  <div class="card">
    <div class="card-body" >
      <table class="table table-hover table-bordered table-striped">
        <thead class="bg-dark text-light">
          <tr>
            <th></th>
            
            <th scope="col" (click)="sort('firstName')" style="cursor: pointer;">
              First Name <i class="fas fa-sort" title="Sort"></i>
            </th>
            <th scope="col" (click)="sort('middleName')" style="cursor: pointer;">
              Middle Name <i class="fas fa-sort" title="Sort"></i>
            </th>
            <th scope="col" (click)="sort('lastName')" style="cursor: pointer;">
              Last Name <i class="fas fa-sort" title="Sort"></i>
            </th>
            <th scope="col" (click)="sort('email')" style="cursor: pointer;">
              Email <i class="fas fa-sort" title="Sort"></i>
            </th>
          </tr>
        </thead>
        <tbody *ngIf="!isLoading">
          <!-- Loader -->


          <tr *ngFor="let user of users ;let i = index">

            <td>
              <img *ngIf="user.profileImageUrl" [src]="user.profileImageUrl" class="profile-pic" />
              <div *ngIf="user.profileImageUrl==null" class="initials-avatar" [ngStyle]="{'background-color': getColor(i)}">
                {{ getInitials(user.firstName + ' ' + user.lastName) }}
              </div>
            </td>
            



            <!-- <td>
              <img
                *ngIf="user.profileImageUrl"
                [src]="user.profileImageUrl"
                alt="Profile Picture"
                class="profile-pic"
              />
               <div
                *ngIf="!user.profileImageUrl"
                class="initials-avatar"
                [ngStyle]="{'background-color': getColor(i)}"
              >
                {{ initials }}
              </div> 
            </td>
         -->
            
           
            <td>{{ user.firstName }}</td>
            <td>{{ user.middleName }}</td>
            <td>{{ user.lastName }}</td>
            <td>{{ user.email }}</td>
            <!-- <td>  
              <div class="dropdown action-td pl-dropdown">
                  <a class="" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                      <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                          <path d="M10 5.625C8.96447 5.625 8.125 4.78553 8.125 3.75C8.125 2.71447 8.96447 1.875 10 1.875C11.0355 1.875 11.875 2.71447 11.875 3.75C11.875 4.78553 11.0355 5.625 10 5.625Z" fill="#1E202C"></path>
                          <path d="M10 11.875C8.96447 11.875 8.125 11.0355 8.125 10C8.125 8.96447 8.96447 8.125 10 8.125C11.0355 8.125 11.875 8.96447 11.875 10C11.875 11.0355 11.0355 11.875 10 11.875Z" fill="#1E202C"></path>
                          <path d="M8.125 16.25C8.125 17.2855 8.96447 18.125 10 18.125C11.0355 18.125 11.875 17.2855 11.875 16.25C11.875 15.2145 11.0355 14.375 10 14.375C8.96447 14.375 8.125 15.2145 8.125 16.25Z" fill="#1E202C"></path>
                          </svg>
                  </a>

                  <ul class="dropdown-menu action-td-menu pl-dropdown-menu">
                      <li>
                          <a class="dropdown-item" href="#" data-bs-toggle="modal" data-bs-target="#edit-noveltag-modal">
                              <svg width="20" height="20" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
                                  <path fill-rule="evenodd" clip-rule="evenodd" d="M21.7516 12.6471L19.866 10.7614L8.33521 22.2922L7.42877 25.0843L10.2208 24.1778L21.7516 12.6471ZM11.6535 26.5164L3.27734 29.2357L5.99665 20.8595L19.866 6.9902L25.5228 12.6471L11.6535 26.5164Z" fill="#1E202C"></path>
                                  <path fill-rule="evenodd" clip-rule="evenodd" d="M27.4085 3.21896C26.3671 2.17756 24.6786 2.17756 23.6373 3.21896L21.7516 5.10458L27.4085 10.7614L29.2941 8.87581C30.3355 7.83442 30.3355 6.14598 29.2941 5.10458L27.4085 3.21896Z" fill="#1E202C"></path>
                                  </svg> Edit
                          </a>
                      </li>
                      <li><a class="dropdown-item" href="#" data-bs-toggle="modal" data-bs-target="#delete-tag-modal"><svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                          <path d="M8.33333 14.9998C7.8731 14.9998 7.5 14.6267 7.5 14.1665L7.5 8.33317C7.5 7.87293 7.8731 7.49984 8.33333 7.49984C8.79357 7.49984 9.16667 7.87293 9.16667 8.33317L9.16667 14.1665C9.16667 14.6267 8.79357 14.9998 8.33333 14.9998Z" fill="#1E202C"></path>
                          <path d="M10.8333 14.1665C10.8333 14.6267 11.2064 14.9998 11.6667 14.9998C12.1269 14.9998 12.5 14.6267 12.5 14.1665V8.33317C12.5 7.87293 12.1269 7.49984 11.6667 7.49984C11.2064 7.49984 10.8333 7.87293 10.8333 8.33317V14.1665Z" fill="#1E202C"></path>
                          <path fill-rule="evenodd" clip-rule="evenodd" d="M6.79412 2.99003L6.16667 4.1665H3.33333C2.8731 4.1665 2.5 4.5396 2.5 4.99984C2.5 5.46007 2.8731 5.83317 3.33333 5.83317H3.38053L4.06391 17.5484C4.08962 17.989 4.45445 18.3332 4.89583 18.3332H15.1042C15.5456 18.3332 15.9104 17.989 15.9361 17.5484L16.6195 5.83317H16.6667C17.1269 5.83317 17.5 5.46007 17.5 4.99984C17.5 4.5396 17.1269 4.1665 16.6667 4.1665H13.8333L13.2059 2.99003C12.7714 2.17537 11.9233 1.6665 11 1.6665H9C8.07672 1.6665 7.2286 2.17537 6.79412 2.99003ZM9 3.33317C8.69224 3.33317 8.40953 3.50279 8.26471 3.77435L8.05556 4.1665H11.9444L11.7353 3.77435C11.5905 3.50279 11.3078 3.33317 11 3.33317H9ZM14.95 5.83317H5.05003L5.68197 16.6665H14.318L14.95 5.83317Z" fill="#1E202C"></path>
                          </svg> Delete
                      </a>
                      </li>
                      <li>
                          <a class="dropdown-item" href="#">
                              <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                              <path d="M13.5355 14.7142C13.861 15.0396 14.3886 15.0396 14.714 14.7142C15.0395 14.3887 15.0395 13.8611 14.714 13.5357L11.1785 10.0001L14.714 6.4646C15.0395 6.13916 15.0395 5.61152 14.714 5.28609C14.3886 4.96065 13.861 4.96065 13.5355 5.28609L10 8.82161L6.46446 5.28607C6.13902 4.96063 5.61139 4.96063 5.28595 5.28607C4.96051 5.61151 4.96051 6.13914 5.28595 6.46458L8.82149 10.0001L5.28595 13.5357C4.96051 13.8611 4.96051 14.3887 5.28595 14.7142C5.61138 15.0396 6.13902 15.0396 6.46446 14.7142L10 11.1786L13.5355 14.7142Z" fill="#1E202C"></path>
                              </svg> Cancel
                          </a>
                      </li>
                  </ul>
              </div>

          </td> -->
          <td> 
            <div class="dropdown action-td pl-dropdown">
                <a class="" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M10 5.625C8.96447 5.625 8.125 4.78553 8.125 3.75C8.125 2.71447 8.96447 1.875 10 1.875C11.0355 1.875 11.875 2.71447 11.875 3.75C11.875 4.78553 11.0355 5.625 10 5.625Z" fill="#1E202C"></path>
                        <path d="M10 11.875C8.96447 11.875 8.125 11.0355 8.125 10C8.125 8.96447 8.96447 8.125 10 8.125C11.0355 8.125 11.875 8.96447 11.875 10C11.875 11.0355 11.0355 11.875 10 11.875Z" fill="#1E202C"></path>
                        <path d="M8.125 16.25C8.125 17.2855 8.96447 18.125 10 18.125C11.0355 18.125 11.875 17.2855 11.875 16.25C11.875 15.2145 11.0355 14.375 10 14.375C8.96447 14.375 8.125 15.2145 8.125 16.25Z" fill="#1E202C"></path>
                        </svg>
                </a>

                <ul class="dropdown-menu action-td-menu pl-dropdown-menu">
                    <li>
                        <a class="dropdown-item" href="#" data-bs-toggle="modal" data-bs-target="#edit-noveltag-modal">
                            <svg width="20" height="20" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path fill-rule="evenodd" clip-rule="evenodd" d="M21.7516 12.6471L19.866 10.7614L8.33521 22.2922L7.42877 25.0843L10.2208 24.1778L21.7516 12.6471ZM11.6535 26.5164L3.27734 29.2357L5.99665 20.8595L19.866 6.9902L25.5228 12.6471L11.6535 26.5164Z" fill="#1E202C"></path>
                                <path fill-rule="evenodd" clip-rule="evenodd" d="M27.4085 3.21896C26.3671 2.17756 24.6786 2.17756 23.6373 3.21896L21.7516 5.10458L27.4085 10.7614L29.2941 8.87581C30.3355 7.83442 30.3355 6.14598 29.2941 5.10458L27.4085 3.21896Z" fill="#1E202C"></path>
                                </svg> Edit
                        </a>
                    </li>
                    <li><a class="dropdown-item" href="#" data-bs-toggle="modal" data-bs-target="#delete-tag-modal"><svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M8.33333 14.9998C7.8731 14.9998 7.5 14.6267 7.5 14.1665L7.5 8.33317C7.5 7.87293 7.8731 7.49984 8.33333 7.49984C8.79357 7.49984 9.16667 7.87293 9.16667 8.33317L9.16667 14.1665C9.16667 14.6267 8.79357 14.9998 8.33333 14.9998Z" fill="#1E202C"></path>
                        <path d="M10.8333 14.1665C10.8333 14.6267 11.2064 14.9998 11.6667 14.9998C12.1269 14.9998 12.5 14.6267 12.5 14.1665V8.33317C12.5 7.87293 12.1269 7.49984 11.6667 7.49984C11.2064 7.49984 10.8333 7.87293 10.8333 8.33317V14.1665Z" fill="#1E202C"></path>
                        <path fill-rule="evenodd" clip-rule="evenodd" d="M6.79412 2.99003L6.16667 4.1665H3.33333C2.8731 4.1665 2.5 4.5396 2.5 4.99984C2.5 5.46007 2.8731 5.83317 3.33333 5.83317H3.38053L4.06391 17.5484C4.08962 17.989 4.45445 18.3332 4.89583 18.3332H15.1042C15.5456 18.3332 15.9104 17.989 15.9361 17.5484L16.6195 5.83317H16.6667C17.1269 5.83317 17.5 5.46007 17.5 4.99984C17.5 4.5396 17.1269 4.1665 16.6667 4.1665H13.8333L13.2059 2.99003C12.7714 2.17537 11.9233 1.6665 11 1.6665H9C8.07672 1.6665 7.2286 2.17537 6.79412 2.99003ZM9 3.33317C8.69224 3.33317 8.40953 3.50279 8.26471 3.77435L8.05556 4.1665H11.9444L11.7353 3.77435C11.5905 3.50279 11.3078 3.33317 11 3.33317H9ZM14.95 5.83317H5.05003L5.68197 16.6665H14.318L14.95 5.83317Z" fill="#1E202C"></path>
                        </svg> Delete
                    </a>
                    </li>
                    <li>
                        <a class="dropdown-item" href="#">
                            <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M13.5355 14.7142C13.861 15.0396 14.3886 15.0396 14.714 14.7142C15.0395 14.3887 15.0395 13.8611 14.714 13.5357L11.1785 10.0001L14.714 6.4646C15.0395 6.13916 15.0395 5.61152 14.714 5.28609C14.3886 4.96065 13.861 4.96065 13.5355 5.28609L10 8.82161L6.46446 5.28607C6.13902 4.96063 5.61139 4.96063 5.28595 5.28607C4.96051 5.61151 4.96051 6.13914 5.28595 6.46458L8.82149 10.0001L5.28595 13.5357C4.96051 13.8611 4.96051 14.3887 5.28595 14.7142C5.61138 15.0396 6.13902 15.0396 6.46446 14.7142L10 11.1786L13.5355 14.7142Z" fill="#1E202C"></path>
                            </svg> Cancel
                        </a>
                    </li>
                </ul>
            </div>

        </td>

          </tr>
          <tr *ngIf="users.length === 0">
            <td colspan="4" class="text-center">No users found</td>
          </tr>
        </tbody>
      </table>
      <app-admin-loader [isLoading]="isLoading&&users.length>0"></app-admin-loader>

    </div>

  </div>

  <div class="record-count-container">
    <span id="recordCountBtn">Total Records: {{ pagedResponse.totalCount }}</span>
  </div>
  
  <!-- Pagination Controls -->
  <div class="pagination justify-content-center my-4">
    <button class="page-link" [disabled]="currentPage === 1" (click)="onPreviousPage()">Previous</button>
    
    <button *ngFor="let page of totalPages" 
            class="btn page-link" 
            [ngClass]="{'active': currentPage === page}" 
            (click)="onPageChange(page)">
      {{ page }}
    </button>
    
    <button class="page-link" [disabled]="currentPage === pagedResponse.totalPages" (click)="onNextPage()">Next</button>
  </div>
</div>
